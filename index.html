<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تقرير فريق السوشيال ميديا</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f0f2f5;
        }
        .card {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e5e7eb;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        .premium-header {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: white;
        }
        .stat-card i {
            transition: transform 0.3s ease;
        }
        .stat-card:hover i {
            transform: scale(1.1);
        }
        .note-box {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 12px;
            min-height: 80px;
            color: #495057;
        }
        .kpi-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f1f1f1;
        }
        .kpi-item:last-child {
            border-bottom: none;
        }
    </style>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="premium-header text-center p-6 rounded-xl mb-8 shadow-lg">
            <div class="flex items-center justify-center gap-4">
                <i data-lucide="users-2" class="w-10 h-10"></i>
                <h1 class="text-3xl md:text-4xl font-bold">تقرير فريق السوشيال ميديا</h1>
            </div>
        </header>

        <div class="card p-4 mb-8 flex flex-col sm:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-4">
                <h2 class="text-lg font-semibold text-gray-700">اختر الفترة لعرض التقرير:</h2>
                <div class="flex gap-4">
                    <select id="month-selector" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                    </select>
                    <select id="year-selector" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                    </select>
                </div>
            </div>
            <a href="https://ieatd-academy2.github.io/data/" class="bg-blue-600 text-white font-semibold px-4 py-2.5 rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                 <i data-lucide="table" class="w-5 h-5"></i>
                <span>بيانات العملاء</span>
            </a>
        </div>


        <div id="report-content">
            </div>
        
        <div id="no-data-placeholder" class="card p-8 text-center text-gray-500 text-xl font-semibold hidden">
            <i data-lucide="info" class="w-16 h-16 mx-auto mb-4 text-blue-400"></i>
            <p>البيانات غير متاحة حاليًا لهذا الشهر.</p>
        </div>

    </div>

    <script>
        // Data Store
        const reportData = {
            "2025": {
                "7": { // July - Contains General Report + Zeroed employee stats
                    general: {
                        clientCount: 275,
                        avgQuality: "75%",
                        incomeNoInstallments: "38,500",
                        incomeWithInstallments: "110,800",
                        campaignExpenses: "25,000"
                    },
                    employees: {
                        mahmoud: { 
                            name: "محمود", 
                            role: "مصمم جرافيك",
                            kpis: { "عدد التاسكات": 0, "عدد التعديلات": 0 },
                            dailyPerformance: new Array(31).fill(0),
                            evaluation: {
                                positive: ["-"],
                                negative: ["-"]
                            },
                            recommendations: [],
                            notes: []
                        },
                        sayed: { 
                            name: "سيد", 
                            role: "مونتير فيديو",
                            kpis: { "عدد الفيديوهات": 0, "عدد التعديلات": 0 },
                            dailyPerformance: new Array(31).fill(0),
                            evaluation: {
                                positive: ["-"],
                                negative: ["-"]
                            },
                            recommendations: [],
                            notes: []
                        },
                        social: { 
                            name: "مصطفى", 
                            role: "أخصائي سوشيال ميديا",
                            kpis: { "عدد المنشورات": 0, "معدل التفاعل": "0%" },
                             dailyPerformance: new Array(31).fill(0),
                            evaluation: {
                                positive: ["-"],
                                negative: ["-"]
                            },
                            recommendations: [],
                            notes: []
                        },
                        sales: { 
                            name: "لم يتم التعيين بعد", 
                            role: "مبيعات",
                            kpis: { "عدد العملاء الجدد": 0, "إجمالي المبيعات": 0 },
                            dailyPerformance: new Array(31).fill(0),
                            evaluation: {
                                positive: ["-"],
                                negative: ["-"]
                            },
                            recommendations: [],
                            notes: []
                        }
                    }
                },
                "8": { // August - Detailed data from the user
                    general: { // General stats UPDATED as requested
                        clientCount: 213,
                        avgQuality: "68%",
                        incomeNoInstallments: "17415",
                        incomeWithInstallments: "25155",
                        campaignExpenses: "23000"
                    },
                    employees: {
                        mahmoud: { 
                            name: "محمود", 
                            role: "مصمم جرافيك",
                            kpis: { "عدد التاسكات": 20, "عدد التعديلات": 4 },
                            dailyPerformance: [9, 10, 8, 9, 10, 9, 8, 9, 10, 9, 6, 7, 5, 6, 7, 6, 5, 7, 6, 7, 6, 9, 8, 10, 9, 8, 9, 10, 8, 10, 9],
                            evaluation: {
                                positive: [
                                    "تحسن كبير جدا وملحوظ في معدل تسليم التاسكات بالإضافة للكواليتي.",
                                    "مرن في التعامل داخل الفريق بنسبة 60 % وملتزم بمواعيد العمل والقواعد المقررة بنسبة 97 %"
                                ],
                                negative: [
                                    "عدم المعرفة الكاملة بالتعامل في مواقع التصميم غير الفوتوشوب وبرامج ادوبي بشكل عام",
                                    "عدم المرونة في التاسكات المعقدة",
                                    "عدم القدرة على حل المشكلات في أغلب الأحيان (نعمل على تحسين ذلك)"
                                ]
                            },
                            recommendations: ["يمكنكم بناءًا على هذا التقرير إضافة حافز (بقدر 1000 جنيه)، ونوصي بالتحدث مع الموظف بأنكم على علم بأداءه هذا الشهر ثم التأكيد على النقاط الإيجابية ونحن نعمل بشكل كامل على حل النقاط السلبية، وتم فك أجزاء منها."],
                            notes: ["أداء إجمالي جيد جدا"]
                        },
                        mostafa: { 
                            name: "مصطفى", 
                            role: "أخصائي سوشيال ميديا",
                            kpis: { "مجموع البوستات": 60, "عدد التعديلات": 12 },
                            dailyPerformance: [7, 8, 6, 9, 7, 8, 8, 9, 6, 7, 8, 9, 7, 8, 9, 7, 6, 9, 8, 9, 7, 8, 8, 9, 7, 9, 8, 7, 9, 8, 8],
                            evaluation: {
                                positive: [
                                    "تطور ملحوظ في طريقة الكتابة",
                                    "لديه طموحات كبيرة والتزام جزئي بقواعد العمل"
                                ],
                                negative: [
                                    "غياب يومين (يوم بإذن وعذر قهري – يوم بلا إذن)",
                                    "يعتمد على الذكاء الاصطناعي بشكل أساسي أحياناً",
                                    "تأخر في الرد على التعليقات"
                                ]
                            },
                            recommendations: [
                                "وضع خطة للرد السريع على تعليقات المتابعين",
                                "تحليل المنشورات ذات التفاعل المنخفض لتحديد أسباب ذلك",
                                "يمكنكم إضافة حافز من 500 جنيه لألف جنيه فقط"
                            ],
                            notes: ["أداء مقبول باعتباره أول شهر، ويظهر تحسنًا فترة بعد فترة بعد التعديلات."]
                        },
                        sayed: { 
                            name: "سيد", 
                            role: "مونتير فيديو",
                            kpis: { "عدد الفيديوهات": "4 من 8", "عدد التعديلات": 2 },
                            dailyPerformance: [8, 9, 7, 8, 9, 8, 7, 9, 6, 8, 9, 7, 8, 9, 8, 8, 9, 7, 8, 9, 7, 9, 8, 7, 8, 9, 8, 9, 7, 8, 9],
                            evaluation: {
                                positive: [
                                    "تطور في صناعة الفيديوهات",
                                    "تطور في فهم الاسكربت والعمل وفقا له"
                                ],
                                negative: [
                                    "تأخير في مواعيد التسليمات",
                                    "عدم الالتزام بموعده في اليوم المحدد له من 10ص لـ 6م"
                                ]
                            },
                            recommendations: [
                                "استخدام الذكاء الاصطناعي بشكل أكبر للمساعدة في تنفيذ الاسكربت في أقل وقت ممكن",
                                "العمل على تنفيذ الاسكربت بمدة أقل"
                            ],
                            notes: ["أداء إجمالي مقبول"]
                        }
                    }
                },
                "9": { // September - DAILY PERFORMANCE DATA UPDATED
                    general: {
                        clientCount: 300,
                        avgQuality: "65%",
                        incomeNoInstallments: "-",
                        incomeWithInstallments: "40,000",
                        campaignExpenses: "13,000"
                    },
                    employees: {
                        mahmoud: {
                            name: "محمود",
                            role: "مصمم جرافيك",
                            kpis: { "عدد التاسكات": 20, "معدل التعديلات": "1 لكل 5 تاسكات" },
                            dailyPerformance: [9, 10, 8, 9, 10, 9, 8, 9, 10, 9, 10, 9, 8, 10, 9, 8, 9, 10, 10, 9, 8, 9, 10, 9, 8, 10, 9, 9, 10, 8],
                            evaluation: {
                                positive: [
                                    "مرونة في تأدية التاسكات",
                                    "تحسن كبير في معدل تسليم التاسكات بالإضافة للكواليتي",
                                    "القيام بتاسكات حتى إن لم تطلب منه",
                                    "التزام كبير في مواعيد العمل"
                                ],
                                negative: ["-"]
                            },
                            recommendations: ["يوصي بوضع حافز متوسط"],
                            notes: ["الأداء العام: جيد جدا"]
                        },
                        mostafa: {
                            name: "مصطفى",
                            role: "أخصائي سوشيال ميديا",
                            kpis: { 
                                "بوستات فيسبوك/انستقرام": 42,
                                "فيديوهات تيك توك/يوتيوب": 6,
                                "مقالات لينكدإن": 2,
                                "معدل التعديلات": "1 لكل 2 بوست"
                            },
                            dailyPerformance: [8, 9, 7, 8, 8, 9, 7, 8, 9, 7, 4, 5, 3, 4, 5, 4, 3, 5, 4, 5, 5, 6, 5, 6, 7, 6, 7, 6, 7, 7],
                            evaluation: {
                                positive: [
                                    "تطور في الأداء وقابلية التعلم"
                                ],
                                negative: [
                                    "عدم الاحترافية الكافية في إنشاء الديزاين بورد",
                                    "عدم الجلوس على المكتب لفترة كافية تسمح له بإنجاز المهام في مواعيدها",
                                    "مهام كثيرة تتأخر عن موعدها أو تنفذ بشكل غير مكتمل"
                                ]
                            },
                            recommendations: [],
                            notes: ["الأداء العام : مقبول"]
                        },
                        sayed: {
                            name: "سيد",
                            role: "مونتير فيديو",
                            kpis: { "عدد الفيديوهات": "4 من 4" },
                            dailyPerformance: [9, 8, 10, 9, 8, 9, 10, 8, 9, 8, 5, 4, 3, 5, 4, 3, 4, 5, 4, 5, 6, 7, 8, 9, 10, 9, 8, 10, 9, 10],
                            evaluation: {
                                positive: [
                                    "الحضور في المواعيد المحددة",
                                    "تنفيذ التاسك كما هو مكتوب في الوصف",
                                    "تطور ملحوظ في صناعة الفيديوهات"
                                ],
                                negative: ["-"]
                            },
                            recommendations: [],
                            notes: ["أداء عام ممتاز"]
                        },
                         sales: { 
                            name: "لم يتم التعيين بعد", 
                            role: "مبيعات",
                            kpis: { "عدد العملاء الجدد": 0, "إجمالي المبيعات": 0 },
                            dailyPerformance: new Array(30).fill(0),
                            evaluation: {
                                positive: ["-"],
                                negative: ["-"]
                            },
                            recommendations: [],
                            notes: []
                        }
                    }
                },
                "10": { // October - NEW DATA ADDED
                    general: {
                        clientCount: 178,
                        avgQuality: "-", // Data not provided
                        incomeNoInstallments: "-", // Data not provided
                        incomeWithInstallments: "93,348",
                        campaignExpenses: "20,000"
                    },
                    employees: {
                        mahmoud: {
                            name: "محمود",
                            role: "مصمم جرافيك",
                            kpis: { "عدد التاسكات": 25 },
                            dailyPerformance: new Array(31).fill(9), // Interpreted as constant 'very good'
                            evaluation: {
                                positive: [
                                    "المساعدة في عمل فيديو للمحاضرة المجانية لسمير",
                                    "تجربة المعدات معنا والعمل عليها",
                                    "العمل كوقت إضافي أثناء محاضرة ( سمير )"
                                ],
                                negative: ["-"] // Resolved
                            },
                            recommendations: ["يمكنكم بناءًا على هذا التقرير إضافة حافز ( بقدر 1500 جنيه )، ونوصي بالتحدث مع الموظف بأنكم على علم بأداءه هذا الشهر ثم التأكيد على النقاط الإيجابية"],
                            notes: ["قد تم حل كل النقاط السلبية التي كانت في الشهرين السابقين", "أداء إجمالي جيد جدا"]
                        },
                        mostafa: { 
                            name: "مصطفى",
                            role: "أخصائي سوشيال ميديا",
                            kpis: { "بوستات على ميتا": 27, "ريلز على تيك توك": 2 },
                            dailyPerformance: new Array(31).fill(8), // No data provided, filled with 'good'
                            evaluation: {
                                positive: ["حل كل النقاط السلبية في الشهرين الماضيين"],
                                negative: ["-"] // Resolved
                            },
                            recommendations: [], // None provided
                            notes: ["أداء جيد"]
                        },
                        sayed: {
                            name: "سيد",
                            role: "مونتير فيديو",
                            kpis: { "عدد الفيديوهات": "3 من 4", "عدد التعديلات": 0 },
                            dailyPerformance: new Array(31).fill(8), // No data provided, filled with 'good'
                            evaluation: {
                                positive: ["عمل فيديو البرومو 3 دقايق في وقت قياسي"],
                                negative: ["-"] // None provided
                            },
                            recommendations: [], // None provided
                            notes: ["أداء إجمالي جيد"]
                        },
                        sales: { // Added for consistency
                            name: "لم يتم التعيين بعد",
                            role: "مبيعات",
                            kpis: { "عدد العملاء الجدد": 0, "إجمالي المبيعات": 0 },
                            dailyPerformance: new Array(31).fill(0),
                            evaluation: {
                                positive: ["-"],
                                negative: ["-"]
                            },
                            recommendations: [],
                            notes: []
                        }
                    }
                }
            }
        };


        const monthSelector = document.getElementById('month-selector');
        const yearSelector = document.getElementById('year-selector');
        const reportContent = document.getElementById('report-content');
        const noDataPlaceholder = document.getElementById('no-data-placeholder');
        let charts = {}; // To hold chart instances

        // Populate Selectors
        function populateSelectors() {
            const months = [
                { value: 1, name: "يناير" }, { value: 2, name: "فبراير" }, { value: 3, name: "مارس" },
                { value: 4, name: "أبريل" }, { value: 5, name: "مايو" }, { value: 6, name: "يونيو" },
                { value: 7, name: "يوليو" }, { value: 8, name: "أغسطس" }, { value: 9, name: "سبتمبر" },
                { value: 10, name: "أكتوبر" }, { value: 11, name: "نوفمبر" }, { value: 12, name: "ديسمبر" }
            ];
            
            months.forEach(month => {
                const option = document.createElement('option');
                option.value = month.value;
                option.textContent = month.name;
                monthSelector.appendChild(option);
            });

            const startYear = 2025;
            for (let i = startYear; i <= startYear + 5; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                yearSelector.appendChild(option);
            }

            // Set default to October 2025 to show the new data
            monthSelector.value = 10;
            yearSelector.value = 2025;
        }

        // Render Performance Chart
        function renderPerformanceChart(canvasId, data, month, year) {
             if (charts[canvasId]) {
                  charts[canvasId].destroy();
             }
            const ctx = document.getElementById(canvasId).getContext('2d');
            const daysInMonth = new Date(year, month, 0).getDate();
            const labels = Array.from({ length: daysInMonth }, (_, i) => i + 1);
            
            const gradient = ctx.createLinearGradient(0, 0, 0, 150);
            gradient.addColorStop(0, 'rgba(59, 130, 246, 0.4)');
            gradient.addColorStop(1, 'rgba(59, 130, 246, 0)');


            charts[canvasId] = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'مستوى الأداء اليومي',
                        data: data,
                        borderColor: '#3b82f6',
                        borderWidth: 2.5,
                        pointBackgroundColor: '#1e3a8a',
                        pointRadius: 3,
                        pointHoverRadius: 5,
                        tension: 0.4,
                        fill: true,
                        backgroundColor: gradient,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                             grid: {
                                 color: '#f1f1f1'
                            }
                        },
                        x: {
                             grid: {
                                 display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Render Report
        function renderReport(year, month) {
            const data = reportData[year] ? reportData[year][month] : null;

            if (data) {
                reportContent.classList.remove('hidden');
                noDataPlaceholder.classList.add('hidden');

                reportContent.innerHTML = `
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">التقرير العام لشهر ${monthSelector.options[monthSelector.selectedIndex].text} ${year}</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            <div class="stat-card card p-6 flex items-center gap-4">
                                <i data-lucide="users" class="w-12 h-12 text-blue-500"></i>
                                <div><p class="text-gray-500 text-sm">عدد العملاء</p><p class="text-2xl font-bold text-gray-800">${data.general.clientCount}</p></div>
                            </div>
                            <div class="stat-card card p-6 flex items-center gap-4">
                                <i data-lucide="star" class="w-12 h-12 text-yellow-500"></i>
                                <div><p class="text-gray-500 text-sm">متوسط الجودة</p><p class="text-2xl font-bold text-gray-800">${data.general.avgQuality}</p></div>
                            </div>
                            <div class="stat-card card p-6 flex items-center gap-4">
                                <i data-lucide="landmark" class="w-12 h-12 text-green-500"></i>
                                <div><p class="text-gray-500 text-sm">العائد</p><p class="text-2xl font-bold text-gray-800">${data.general.incomeWithInstallments} جنيه</p></div>
                            </div>
                             <div class="stat-card card p-6 flex items-center gap-4">
                                <i data-lucide="receipt" class="w-12 h-12 text-red-500"></i>
                                <div><p class="text-gray-500 text-sm">مصروفات الحملات</p><p class="text-2xl font-bold text-gray-800">${data.general.campaignExpenses} جنيه</p></div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">تقارير الموظفين</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            ${Object.entries(data.employees).map(([key, emp]) => `
                                <div class="card p-6 flex flex-col space-y-6">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h3 class="text-xl font-bold text-blue-800">${emp.name}</h3>
                                            <p class="text-gray-600">${emp.role}</p>
                                        </div>
                                        <div class="bg-blue-100 p-3 rounded-full"><i data-lucide="user-circle-2" class="w-8 h-8 text-blue-600"></i></div>
                                    </div>
                                    
                                    <div class="border-t border-gray-200 pt-4">
                                        <h4 class="font-semibold text-gray-700 mb-2">مؤشرات الأداء الرئيسية (KPIs)</h4>
                                        <div class="text-sm">
                                            ${Object.entries(emp.kpis).map(([key, value]) => `
                                                <div class="kpi-item">
                                                    <span class="text-gray-600">${key}</span>
                                                    <span class="font-bold text-blue-700 bg-blue-100 px-2 py-1 rounded-md">${value}</span>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>

                                     <div class="pt-4">
                                        <h4 class="font-semibold text-gray-700 mb-2">مخطط الأداء اليومي</h4>
                                        <div style="height: 150px;">
                                           <canvas id="chart-${key}"></canvas>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                        <div>
                                            <h4 class="font-semibold text-gray-700 mb-2 flex items-center gap-2"><i data-lucide="thumbs-up" class="w-5 h-5 text-green-500"></i>نقاط إيجابية</h4>
                                            <ul class="space-y-1 list-inside text-sm">
                                                ${emp.evaluation.positive.map(point => `<li class="flex items-start gap-2"><i data-lucide="check-circle-2" class="w-4 h-4 text-green-500 mt-1 shrink-0"></i><span class="text-gray-600">${point}</span></li>`).join('')}
                                            </ul>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-700 mb-2 flex items-center gap-2"><i data-lucide="thumbs-down" class="w-5 h-5 text-red-500"></i>نقاط سلبية</h4>
                                            <ul class="space-y-1 list-inside text-sm">
                                                ${emp.evaluation.negative.map(point => `<li class="flex items-start gap-2"><i data-lucide="x-circle" class="w-4 h-4 text-red-500 mt-1 shrink-0"></i><span class="text-gray-600">${point}</span></li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="space-y-4 border-t border-gray-200 pt-4">
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-1">التوصيات</label>
                                            <div class="note-box">
                                                ${emp.recommendations && emp.recommendations.length > 0 ? `
                                                    <ul class="list-disc pr-4 space-y-1 text-sm">
                                                        ${emp.recommendations.map(point => `<li>${point}</li>`).join('')}
                                                    </ul>
                                                ` : 'لا توجد توصيات حاليًا.'}
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-1">الملاحظات</label>
                                            <div class="note-box">
                                                ${emp.notes && emp.notes.length > 0 ? `
                                                    <ul class="list-disc pr-4 space-y-1 text-sm">
                                                        ${emp.notes.map(point => `<li>${point}</li>`).join('')}
                                                    </ul>
                                                ` : 'لا توجد ملاحظات حاليًا.'}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                // Render charts after the HTML is in the DOM
                setTimeout(() => {
                    Object.entries(data.employees).forEach(([key, emp]) => {
                        if (emp.dailyPerformance) {
                           renderPerformanceChart(`chart-${key}`, emp.dailyPerformance, month, year);
                        }
                    });
                }, 0);

            } else {
                reportContent.classList.add('hidden');
                noDataPlaceholder.classList.remove('hidden');
            }
            lucide.createIcons(); // Re-render icons
        }

        // Event Listeners
        monthSelector.addEventListener('change', () => renderReport(yearSelector.value, monthSelector.value));
        yearSelector.addEventListener('change', () => renderReport(yearSelector.value, monthSelector.value));

        // Initial Load
        document.addEventListener('DOMContentLoaded', () => {
            populateSelectors();
            renderReport(yearSelector.value, monthSelector.value);
            lucide.createIcons();
        });
    </script>
</body>
</html>
